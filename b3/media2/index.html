

<!DOCTYPE html>
<html lang="ja">

<head>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Loginページ</title>
    </head>
</head>

<body>
    <button id="myclick">ログイン</button>
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script type="module">
        //デプロイで参考にしたURL
        //https://qiita.com/hiroki-harada/items/ca22ac177db68e3c3796
        
        
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
        // https://firebase.google.com/docs/web/learn-more#libraries-cdn
        import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD0CDASi67f4-q-pPBpK-tQfs3HsG61D5Q",
            authDomain: "sample-d77a5.firebaseapp.com",
            projectId: "sample-d77a5",
            storageBucket: "sample-d77a5.appspot.com",
            messagingSenderId: "417560142096",
            appId: "1:417560142096:web:a50600e7d827a9c09a4595"
        };

        const app = initializeApp(firebaseConfig);

        const auth = getAuth();
        const provider = new GoogleAuthProvider();
        
        $("#myclick").on("click", function() {
            signInWithPopup(auth, provider)
            .then((result) => {
                // This gives you a Google Access Token. You can use it to access the Google API.
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;
                // The signed-in user info.
                const user = result.user;
                // ...
                switch (user.uid) {
                    //りー
                    case 'wWRJ5RcSepPrqiCIOdxIlq5u44g1':
                    window.location.href = '/ando/chat.html';
                    break;

                    case 'RcL4kc6xbgNsdLQ9nZXCqd8HM0Q2':
                    window.location.href = '/iida/chat.html';
                    break;

                    default: 
                    console.log('UID Nothing')
                }
            }).catch((error) => {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);
                // ...
            });
        });

        
    </script>

</body>

</html>